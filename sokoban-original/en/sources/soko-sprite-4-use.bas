--- Q%[X,Y] A pálya
---         0 : SZABAD
---         1 : Láda
---         2,4,6,8 : Magick wall 8=Up, 2=Down, 4=Left, 6=Right
---         5 : Fal
770 COLOR 1:PUT@A(X*2,Y)-(X*2+1,Y),AR%
--- #include soko-keyboard-1235.bas
#include soko-keyboard-ijkl.bas
880 GOTO 780
890 PUT@A(X*2,Y)-(X*2+1,Y),AU%:Q%(X,Y)=0:IF Z<>1 THEN PUT@A(X2*2,Y2)-(X2*2+1,Y2),AB%:Q%(X2,Y2)=0:GOTO 930 ELSE 930
900 PUT@A(X*2,Y)-(X*2+1,Y),AD%:Q%(X,Y)=0:IF Z<>1 THEN PUT@A(X2*2,Y2)-(X2*2+1,Y2),AB%:Q%(X2,Y2)=0:GOTO 930 ELSE 930
910 PUT@A(X*2,Y)-(X*2+1,Y),AL%:Q%(X,Y)=0:IF Z<>1 THEN PUT@A(X2*2,Y2)-(X2*2+1,Y2),AB%:Q%(X2,Y2)=0:GOTO 930 ELSE 930
920 PUT@A(X*2,Y)-(X*2+1,Y),AR%:Q%(X,Y)=0:IF Z<>1 THEN PUT@A(X2*2,Y2)-(X2*2+1,Y2),AB%:Q%(X2,Y2)=0:GOTO 930 ELSE 930
930 X2=X:Y2=Y:GOTO 780
940 IF Q%(X,Y-2)=0 THEN PUT@A(X*2,Y-2)-(X*2+1,Y-2),AN%:Q%(X,Y-2)=1:Y=Y-1:Z=0:RETURN ELSE GOTO 980
950 IF Q%(X,Y+2)=0 THEN PUT@A(X*2,Y+2)-(X*2+1,Y+2),AN%:Q%(X,Y+2)=1:Y=Y+1:Z=0:RETURN ELSE GOTO 980
960 IF Q%(X-2,Y)=0 THEN PUT@A((X-2)*2,Y)-((X-2)*2+1,Y),AN%:Q%(X-2,Y)=1:X=X-1:Z=0:RETURN ELSE GOTO 980
970 IF Q%(X+2,Y)=0 THEN PUT@A((X+2)*2,Y)-((X+2)*2+1,Y),AN%:Q%(X+2,Y)=1:X=X+1:Z=0:RETURN ELSE GOTO 980
980 Z=1:RETURN
990 REM *** SHOW LEVEL G% *****************************************
1000 ON G% GOTO 1010,1020,1030,1040,1050,1060,1070,1080,1090,1100,1110,1120,1130,1140,1150,1160,1170,1180,1190,1230
1010 RESTORE 1720:GOSUB 1270:RETURN
1020 RESTORE 1760:GOSUB 1270:RETURN
1030 RESTORE 1800:GOSUB 1270:RETURN
1040 RESTORE 1830:GOSUB 1270:RETURN
1050 RESTORE 1880:GOSUB 1270:RETURN
1060 RESTORE 1920:GOSUB 1270:RETURN
1070 RESTORE 1950:GOSUB 1270:RETURN
1080 RESTORE 1990:GOSUB 1270:RETURN
1090 RESTORE 2030:GOSUB 1270:RETURN
1100 RESTORE 2070:GOSUB 1270:RETURN
1110 RESTORE 2130:GOSUB 1270:RETURN
1120 RESTORE 2170:GOSUB 1270:RETURN
1130 RESTORE 2210:GOSUB 1270:RETURN
1140 RESTORE 2250:GOSUB 1270:RETURN
1150 RESTORE 2290:GOSUB 1270:RETURN
1160 RESTORE 2350:GOSUB 1270:RETURN
1170 RESTORE 2410:GOSUB 1270:RETURN
1180 RESTORE 2460:GOSUB 1270:RETURN
1190 FORA=7TO24:FORA1=2TO16:PUT@A(A*2,A1)-(A*2+1,A1),AK%:Q%(A,A1)=5:NEXTA1,A
1200 RESTORE 2650
1210 READX1,Y1:IF X1=-1 THEN 1220 ELSE PUT@A(X1*2,Y1)-(X1*2+1,Y1),AB%:Q%(X1,Y1)=0:GOTO1210
1220 GOSUB 1290:RETURN
1230 FORA=1TO30:FORA1=1TO18:PUT@A(A*2,A1)-(A*2+1,A1),AK%:Q%(A,A1)=5:NEXTA1,A
1240 RESTORE 2520
1250 READX1,Y1:IF X1=-1 THEN 1260 ELSE PUT@A(X1*2,Y1)-(X1*2+1,Y1),AB%:Q%(X1,Y1)=0:GOTO1250
1260 GOSUB 1290:RETURN
1270 REM *********************** SHOW WAREHOUSE ***************************
1280 READX1,Y1:IF X1=-1 THEN 1290 ELSE PUT@A(X1*2,Y1)-(X1*2+1,Y1),AK%:Q%(X1,Y1)=5:GOTO1280
1290 READX1,Y1:IF X1=-1 THEN 1300 ELSE PUT@A(X1*2,Y1)-(X1*2+1,Y1),AN%:Q%(X1,Y1)=1:GOTO1290
1300 READ X1,Y1,Z1:IF X1=-1 THEN 1310 ELSE Q%(X1,Y1)=Z1:GOTO 1300
--- Red dots HX% és HY% a koordinátáik
1310 A=0
1320 READ X1,Y1:IF X1=0 THEN 1350
1330 HX%(A)=X1*4+1:HY%(A)=Y1*4+1:PSET(X1*4+1,Y1*4+1,2):A=A+1
1340 GOTO 1320
1350 HX%(A)=X1:HY%(A)=Y1
1360 READ X,Y:A=0:RETURN
